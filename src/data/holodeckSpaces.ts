import {
  MessageSquare,
  GitBranch,
  Heart,
  RefreshCw,
  Presentation,
  Rewind,
  Compass,
  User,
  Sparkles,
  Lightbulb,
  Pause,
  Sun,
  CloudRain,
  Shield,
  Users,
  Heart as PeaceIcon,
  Target,
  Hand,
  MessageCircle,
  Anchor,
} from 'lucide-react';
import type { HolodeckSpaceDefinition } from '../components/holodeck/types';

export const HOLODECK_SPACES: Record<string, HolodeckSpaceDefinition> = {
  'difficult-conversation': {
    id: 'difficult-conversation',
    name: 'Difficult Conversation',
    icon: MessageSquare,
    purpose: 'Prepare for a real conversation before it happens',
    userActions: ['Names the person', 'States what they want to say', 'Explores tone and outcome'],
    guideRole: 'Reflects phrasing, highlights risks, suggests calmer framing',
    rules: ['No pretending to "win"', 'Focus on clarity, not dominance'],
    prompts: [
      'Who do you need to speak with?',
      'What do you want them to understand?',
      'What tone feels honest but kind?',
      'What outcome would feel okay, even if not perfect?',
      'What might they be feeling?',
    ],
    exitAllowed: true,
    canSave: true,
    worksOffline: true,
    color: '#22d3ee',
  },

  'decision-space': {
    id: 'decision-space',
    name: 'Decision Space',
    icon: GitBranch,
    purpose: 'Think through a decision without pressure',
    userActions: ['Lays out options', 'Names fears and hopes', 'Sits with uncertainty'],
    guideRole: 'Keeps options visible, prevents rushing',
    rules: ['No forced outcome', 'Uncertainty is valid'],
    prompts: [
      'What decision are you facing?',
      'What are the options you can see?',
      'What are you afraid might happen?',
      'What are you hoping for?',
      'What can wait? What cannot?',
    ],
    exitAllowed: true,
    canSave: true,
    worksOffline: true,
    color: '#a78bfa',
  },

  'emotional-processing': {
    id: 'emotional-processing',
    name: 'Emotional Processing',
    icon: Heart,
    purpose: 'Process a strong emotion safely',
    userActions: ['Names the emotion', 'Describes physical sensation', 'Lets it exist without solving'],
    guideRole: 'Normalizes emotion, prevents suppression or escalation',
    rules: ['No judgment', 'Emotion is data, not danger'],
    prompts: [
      'What emotion is present right now?',
      'Where do you feel it in your body?',
      'What does it need to be acknowledged?',
      'Can it exist without being solved right now?',
      'What would help you carry this more gently?',
    ],
    exitAllowed: true,
    canSave: true,
    worksOffline: true,
    color: '#f87171',
  },

  'role-reversal': {
    id: 'role-reversal',
    name: 'Role Reversal',
    icon: RefreshCw,
    purpose: 'See a situation from another perspective',
    userActions: ["Describes the other person's possible view", 'Acknowledges unknowns'],
    guideRole: 'Interrupts assumptions and absolutism',
    rules: ['No mind-reading', 'Stay curious, not certain'],
    prompts: [
      "Who's perspective are you trying to understand?",
      'What might they be seeing that you cannot?',
      'What do you not know about their situation?',
      'What might they be afraid of?',
      'How might this look different to them?',
    ],
    exitAllowed: true,
    canSave: true,
    worksOffline: true,
    color: '#34d399',
  },

  'performance-rehearsal': {
    id: 'performance-rehearsal',
    name: 'Performance Rehearsal',
    icon: Presentation,
    purpose: 'Prepare for public speaking, meetings, or presentations',
    userActions: ['Walks through the event', 'Names nerves and strengths'],
    guideRole: 'Grounds confidence, not hype',
    rules: ['Honest preparation', 'Nerves are normal'],
    prompts: [
      'What event are you preparing for?',
      'What part feels most challenging?',
      'What do you know you are good at?',
      'What is one thing you can control?',
      'How will you reconnect if you get lost?',
    ],
    exitAllowed: true,
    canSave: true,
    worksOffline: true,
    color: '#fbbf24',
  },

  'crisis-rewind': {
    id: 'crisis-rewind',
    name: 'Crisis Rewind',
    icon: Rewind,
    purpose: 'Revisit a difficult event without reliving trauma',
    userActions: ['Observes from distance', 'Identifies turning points'],
    guideRole: 'Maintains emotional safety and pacing',
    rules: ['User controls pace', 'Observer perspective only', 'Can exit immediately'],
    prompts: [
      'Can you name the event from a distance?',
      'What do you notice now that you did not then?',
      'Where was a turning point?',
      'What would you tell yourself then, if you could?',
      'What do you need to put this down for now?',
    ],
    exitAllowed: true,
    canSave: true,
    worksOffline: true,
    color: '#fb7185',
    isSafetyCritical: true,
  },

  'values-clarification': {
    id: 'values-clarification',
    name: 'Values Clarification',
    icon: Compass,
    purpose: 'Reconnect with personal values',
    userActions: ['Names what matters', 'Notices value conflicts'],
    guideRole: 'Keeps focus on integrity, not image',
    rules: ['Values over appearances', 'No perfect answers'],
    prompts: [
      'What matters most to you right now?',
      'Where do you feel aligned with your values?',
      'Where do you feel pulled away from them?',
      'What would living by this value look like?',
      'What small action honors what you value?',
    ],
    exitAllowed: true,
    canSave: true,
    worksOffline: true,
    color: '#60a5fa',
  },

  'identity-space': {
    id: 'identity-space',
    name: 'Identity Space',
    icon: User,
    purpose: 'Explore "Who am I becoming?"',
    userActions: ['Reflects on roles, labels, growth'],
    guideRole: 'Prevents identity collapse or over-definition',
    rules: ['You are not just one thing', 'Growth is not linear'],
    prompts: [
      'How would you describe yourself right now?',
      'What roles do you hold? Which feel true?',
      'What are you growing into?',
      'What are you growing out of?',
      'What part of you feels most "you"?',
    ],
    exitAllowed: true,
    canSave: true,
    worksOffline: true,
    color: '#818cf8',
  },

  'compassion-space': {
    id: 'compassion-space',
    name: 'Compassion Space',
    icon: Sparkles,
    purpose: 'Extend compassion — to self or others',
    userActions: ['Names pain without judgement'],
    guideRole: 'Softens inner criticism',
    rules: ['Compassion is not weakness', 'Start where you are'],
    prompts: [
      'Who needs compassion right now — you, or someone else?',
      'What would kindness look like here?',
      'Can you name the pain without judging it?',
      'What would you say to a friend in this situation?',
      'Can you offer yourself that same gentleness?',
    ],
    exitAllowed: true,
    canSave: true,
    worksOffline: true,
    color: '#f9a8d4',
  },

  'creative-ideation': {
    id: 'creative-ideation',
    name: 'Creative Ideation',
    icon: Lightbulb,
    purpose: 'Generate ideas without pressure',
    userActions: ['Explores loosely', 'Captures fragments'],
    guideRole: 'Protects playfulness, avoids evaluation',
    rules: ['No judging ideas', 'Quantity over quality', 'Messy is okay'],
    prompts: [
      'What are you exploring or creating?',
      'What ideas come up, even if messy?',
      'What if nothing had to be perfect?',
      'What fragment feels interesting?',
      'What wants to emerge without forcing it?',
    ],
    exitAllowed: true,
    canSave: true,
    worksOffline: true,
    color: '#fcd34d',
  },

  'guided-stillness': {
    id: 'guided-stillness',
    name: 'Guided Stillness',
    icon: Pause,
    purpose: 'Rest the mind',
    userActions: ['Breathes', 'Notices silence'],
    guideRole: 'Minimal presence only',
    rules: ['No forcing calm', 'Stillness is enough'],
    prompts: [
      'Notice your breath, without changing it',
      'What sounds can you hear?',
      'What is one thing you can see?',
      'Can you rest here for a moment?',
      '',
    ],
    exitAllowed: true,
    canSave: true,
    worksOffline: true,
    color: '#93c5fd',
  },

  'gratitude-space': {
    id: 'gratitude-space',
    name: 'Gratitude Space',
    icon: Sun,
    purpose: 'Restore perspective during stress',
    userActions: ['Names simple, concrete gratitudes'],
    guideRole: 'Prevents toxic positivity',
    rules: ['Not forced happiness', 'Honest acknowledgment only', 'No minimizing pain'],
    prompts: [
      'What is one small thing that is okay right now?',
      'What ordinary comfort can you notice?',
      'Who or what steadied you recently?',
      'What worked, even a little?',
      'What can you acknowledge without dismissing difficulty?',
    ],
    exitAllowed: true,
    canSave: true,
    worksOffline: true,
    color: '#fbbf24',
  },

  'loss-letting-go': {
    id: 'loss-letting-go',
    name: 'Loss & Letting Go',
    icon: CloudRain,
    purpose: 'Acknowledge loss or endings',
    userActions: ['Names what was lost', 'Names what remains'],
    guideRole: 'Holds space, does not resolve',
    rules: ['Grief has no timeline', 'No silver linings required'],
    prompts: [
      'What has ended or been lost?',
      'What did it mean to you?',
      'What do you need to acknowledge about it?',
      'What remains, even in the loss?',
      'What do you need to carry forward?',
    ],
    exitAllowed: true,
    canSave: true,
    worksOffline: true,
    color: '#94a3b8',
  },

  'fear-exploration': {
    id: 'fear-exploration',
    name: 'Fear Exploration',
    icon: Shield,
    purpose: 'Understand fear instead of avoiding it',
    userActions: ['Names fear', 'Separates signal from story'],
    guideRole: 'Keeps fear proportionate',
    rules: ['Fear is information', 'Not all fear is danger'],
    prompts: [
      'What are you afraid of?',
      'Is this fear a signal or a story?',
      'What is the actual risk?',
      'What is the imagined risk?',
      'What action would honor the signal?',
    ],
    exitAllowed: true,
    canSave: true,
    worksOffline: true,
    color: '#fb923c',
  },

  'conflict-deescalation': {
    id: 'conflict-deescalation',
    name: 'Conflict De-escalation',
    icon: Users,
    purpose: 'Lower emotional intensity after conflict',
    userActions: ['Replays conflict slowly', 'Identifies escalation points'],
    guideRole: 'Encourages pause and repair',
    rules: ['No blame', 'Focus on repair, not winning'],
    prompts: [
      'What conflict are you carrying?',
      'Where did it escalate?',
      'What were you trying to protect?',
      'What might repair look like?',
      'What can you do differently next time?',
    ],
    exitAllowed: true,
    canSave: true,
    worksOffline: true,
    color: '#34d399',
  },

  'forgiveness-space': {
    id: 'forgiveness-space',
    name: 'Forgiveness Space',
    icon: PeaceIcon,
    purpose: 'Explore forgiveness without forcing it',
    userActions: ['Acknowledges harm', 'Names boundaries'],
    guideRole: 'Rejects premature forgiveness',
    rules: ['No forced forgiveness', 'Boundaries honored', 'Harm acknowledged', 'Timeline respected'],
    prompts: [
      'What happened that hurt you?',
      'What do you need to acknowledge about it?',
      'What boundary needs to stay in place?',
      'Is there any part of this you are ready to release?',
      'What does forgiveness NOT require you to do?',
    ],
    exitAllowed: true,
    canSave: true,
    worksOffline: true,
    color: '#c084fc',
  },

  'purpose-direction': {
    id: 'purpose-direction',
    name: 'Purpose & Direction',
    icon: Target,
    purpose: 'Reconnect with long-term direction',
    userActions: ['Reflects on trajectory', 'Notices drift or alignment'],
    guideRole: 'Keeps vision grounded',
    rules: ['Purpose evolves', 'Direction matters more than destination'],
    prompts: [
      'What direction were you moving toward?',
      'Where are you actually going right now?',
      'What feels aligned? What feels off?',
      'What small adjustment would feel truer?',
      'What matters in the long view?',
    ],
    exitAllowed: true,
    canSave: true,
    worksOffline: true,
    color: '#60a5fa',
  },

  'boundary-setting': {
    id: 'boundary-setting',
    name: 'Boundary-Setting',
    icon: Hand,
    purpose: 'Clarify personal limits',
    userActions: ['Names overreach', 'Practices saying no'],
    guideRole: 'Affirms self-respect',
    rules: ['Boundaries are not punishment', 'You can change your mind'],
    prompts: [
      'Where are you feeling overextended?',
      'What boundary would help?',
      'What are you afraid will happen if you set it?',
      'How can you say no clearly and kindly?',
      'What do you need permission to protect?',
    ],
    exitAllowed: true,
    canSave: true,
    worksOffline: true,
    color: '#f87171',
  },

  'inner-dialogue': {
    id: 'inner-dialogue',
    name: 'Inner Dialogue',
    icon: MessageCircle,
    purpose: 'Untangle conflicting inner voices',
    userActions: ['Names competing thoughts', 'Separates fear from wisdom'],
    guideRole: 'Moderates, does not judge',
    rules: ['All voices have reasons', 'Listen before deciding'],
    prompts: [
      'What voices are speaking inside you?',
      'Which voice is fear? Which is wisdom?',
      'What does each voice need you to hear?',
      'Which voice aligns with your values?',
      'What decision honors the whole of you?',
    ],
    exitAllowed: true,
    canSave: true,
    worksOffline: true,
    color: '#a78bfa',
  },

  're-anchoring': {
    id: 're-anchoring',
    name: 'Re-Anchoring',
    icon: Anchor,
    purpose: 'Return to the present after overwhelm',
    userActions: ['Grounds in body, breath, environment'],
    guideRole: 'Calms and recenters',
    rules: ['Slow and gentle', 'No rushing'],
    prompts: [
      'Where are you right now?',
      'What can you see around you?',
      'What is one thing you can touch?',
      'Can you feel your breath?',
      'You are here. You are safe. You are present.',
    ],
    exitAllowed: true,
    canSave: true,
    worksOffline: true,
    color: '#06b6d4',
  },
};

export const getAllSpaces = (): HolodeckSpaceDefinition[] => {
  return Object.values(HOLODECK_SPACES);
};

export const getSpaceById = (id: string): HolodeckSpaceDefinition | undefined => {
  return HOLODECK_SPACES[id];
};
